<!DOCTYPE html>
<!-- This site was created with Hugo Blox. https://hugoblox.com -->
<!-- Last Published: 2024年7月3日 --><html lang="zh-Hant" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Hugo Blox Builder 5.9.7" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.26c458e6907dc03073573976b7f4044e.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.f6689966c0a10712f95f034011917db0.css" />

  
  
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/github-light.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/dracula.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  






<script async src="https://www.googletagmanager.com/gtag/js?id=G-QYR8JCDGM9"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'G-QYR8JCDGM9', {});
  gtag('set', {'cookie_flags': 'SameSite=None;Secure'});

  
  document.addEventListener('click', onClickCallback, false);
</script>




<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NSBJFRS');
</script>





















  
  
  






  <meta name="author" content="張哲嘉" />





  

<meta name="description" content="Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project." />



  <link rel="alternate" hreflang="en" href="https://chechia.net/en/post/2019-04-19-jenkins-x-on-kubernetes/" />

<link rel="alternate" hreflang="zh-Hant" href="https://chechia.net/zh-hant/post/2019-04-19-jenkins-x-on-kubernetes/" />
<link rel="canonical" href="https://chechia.net/zh-hant/post/2019-04-19-jenkins-x-on-kubernetes/" />



  <link rel="manifest" href="/zh-hant/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#1565c0" />










  
  






<meta property="twitter:card" content="summary" />

  <meta property="twitter:site" content="@chechiachang" />
  <meta property="twitter:creator" content="@chechiachang" />
<meta property="twitter:image" content="https://chechia.net/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_3.png" />



  

<meta property="og:type" content="article" />
<meta property="og:site_name" content="Che-Chia Chang" />
<meta property="og:url" content="https://chechia.net/zh-hant/post/2019-04-19-jenkins-x-on-kubernetes/" />
<meta property="og:title" content="Jenkins X on Kubernetes | Che-Chia Chang" />
<meta property="og:description" content="Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project." /><meta property="og:image" content="https://chechia.net/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_512x512_fill_lanczos_center_3.png" /><meta property="og:locale" content="zh-Hant" />

  
    <meta
      property="article:published_time"
      content="2019-04-19T12:15:41&#43;08:00"
    />
  
  
    <meta property="article:modified_time" content="2023-09-11T22:33:54&#43;08:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://chechia.net/zh-hant/post/2019-04-19-jenkins-x-on-kubernetes/"
  },
  "headline": "Jenkins X on Kubernetes",
  
  "datePublished": "2019-04-19T12:15:41+08:00",
  "dateModified": "2023-09-11T22:33:54+08:00",
  
  "author": {
    "@type": "Person",
    "name": "張哲嘉"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "chechia-net",
    "logo": {
      "@type": "ImageObject",
      "url": "https://chechia.net/media/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project."
}
</script>

  

  




  
  
  

  
  

  


  
  <title>Jenkins X on Kubernetes | Che-Chia Chang</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="e6fd32ec536b4d36f5f015b1d2b76cc0" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.9e4214442a7711d35691acd58f6f6361.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>搜尋</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="關閉"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜尋..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜尋...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/zh-hant/">Che-Chia Chang</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切換導航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/zh-hant/">Che-Chia Chang</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/zh-hant/#talks"><span>演講</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/zh-hant/#posts"><span>發文</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/zh-hant/#projects"><span>專案</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://www.instagram.com/c.c.leather/" target="_blank" rel="noopener"><span>皮件</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://www.instagram.com/dive.with.cat.coach/" target="_blank" rel="noopener"><span>水肺</span></a>
          </li>

          
          

          

          
          
          
            
              
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="https://mvp.microsoft.com/zh-TW/mvp/profile/e407d0b9-5c01-eb11-a815-000d3a8ccaf5" target="_blank" rel="noopener"><span>微軟MVP</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://github.com/chechiachang" data-toggle="tooltip" data-placement="bottom" title="查看我的Github" target="_blank" rel="noopener" aria-label="查看我的Github">
                <i class="fab fa-github" aria-hidden="true"></i>
              </a>
            </li>
          
            
            <li class="nav-item d-none d-lg-inline-flex">
              <a class="nav-link" href="https://www.facebook.com/engineer.from.scratch" data-toggle="tooltip" data-placement="bottom" title="追蹤我的Facebook粉絲專頁" target="_blank" rel="noopener" aria-label="追蹤我的Facebook粉絲專頁">
                <i class="fab fa-facebook" aria-hidden="true"></i>
              </a>
            </li>
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="搜尋"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item dropdown theme-dropdown">
          <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="顯示選項">
            <i class="fas fa-moon" aria-hidden="true"></i>
          </a>
          <div class="dropdown-menu">
            <a href="#" class="dropdown-item js-set-theme-light">
              <span>明亮</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-dark">
              <span>暗黑</span>
            </a>
            <a href="#" class="dropdown-item js-set-theme-auto">
              <span>自動</span>
            </a>
          </div>
        </li>
        

        
        
        <li class="nav-item dropdown i18n-dropdown">
          <a href="#" class="nav-link " data-toggle="dropdown"
             aria-haspopup="true" aria-label="語言">
            <i class="fas fa-globe mr-1" aria-hidden="true"></i></a>
          <div class="dropdown-menu">
            <div class="dropdown-item dropdown-item-active">
              <span>中文 (繁體)</span>
            </div>
            
            <a class="dropdown-item" href="https://chechia.net/en/post/2019-04-19-jenkins-x-on-kubernetes/">
              <span>English</span>
            </a>
            
          </div>
        </li>
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  













  

  
  
  
<div class="article-container pt-3">
  <h1>Jenkins X on Kubernetes</h1>

  

  
    


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          最近更新於
      
    
    9月 11, 2023
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 閱讀時間（分鐘）
  </span>
  

  
  
  
  

  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/zh-hant/category/kubernetes/">kubernetes</a>, <a href="/zh-hant/category/devops/">devops</a>, <a href="/zh-hant/category/jenkins/">jenkins</a></span>
  

</div>

    





  
</div>



  <div class="article-container">

    <div class="article-style">
      <p><a href="https://jenkins.io/" target="_blank" rel="noopener">Jenkins</a> is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.</p>
<p><a href="https://jenkins-x.io/" target="_blank" rel="noopener">Jenkins X</a>, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.</p>
<p>Here we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes.</p>
<ul>
<li><a href="#architecture">Architecture of Jenkins X</a></li>
<li><a href="#install">Install Jenkins with jx</a></li>
<li><a href="#pipeline">Create a Pipeline with jx</a></li>
<li><a href="#client">Develope with jx client</a></li>
</ul>
<p>For more information about jx itself, check <a href="https://github.com/jenkins-x/jx" target="_blank" rel="noopener">Jenkins-X Github Repo</a></p>
<p><a name="architecture"></a></p>
<h1 id="architecture">Architecture</h1>
<p>Check this beautiful diagram.</p>


















<figure  id="figure-httpsjenkins-xioarchitecturediagram">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="jenkins/architecture-serverless.png" alt="https://jenkins-x.io/architecture/diagram/" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      <a href="https://jenkins-x.io/architecture/diagram/" target="_blank" rel="noopener">https://jenkins-x.io/architecture/diagram/</a>
    </figcaption></figure>

<hr>
<p><a name="install"></a></p>
<h1 id="install">Install</h1>
<h3 id="create-gke-cluster--get-credentials">Create GKE cluster &amp; Get Credentials</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">gcloud init
</span></span><span class="line"><span class="cl">gcloud components update
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">CLUSTER_NAME=jenkins-server
</span></span><span class="line"><span class="cl">#CLUSTER_NAME=jenkins-serverless
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">gcloud container clusters create ${CLUSTER_NAME} \
</span></span><span class="line"><span class="cl">  --num-nodes 1 \
</span></span><span class="line"><span class="cl">  --machine-type n1-standard-4 \
</span></span><span class="line"><span class="cl">  --enable-autoscaling \
</span></span><span class="line"><span class="cl">  --min-nodes 1 \
</span></span><span class="line"><span class="cl">  --max-nodes 2 \
</span></span><span class="line"><span class="cl">  --zone asia-east1-b \
</span></span><span class="line"><span class="cl">  --preemptible
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># After cluster initialization, get credentials to access cluster with kubectl
</span></span><span class="line"><span class="cl">gcloud container clusters get-credentials ${CLUSTER_NAME}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Check cluster stats.
</span></span><span class="line"><span class="cl">kubectl get nodes
</span></span></code></pre></div><h3 id="install-jx-on-local-machine">Install jx on Local Machine</h3>
<p>[Jenkins X Release](<a href="https://github.com/jenkins-x/jx/releases]%28https://github.com/jenkins-x/jx/releases%29" target="_blank" rel="noopener">https://github.com/jenkins-x/jx/releases](https://github.com/jenkins-x/jx/releases)</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">JX_VERSION</span><span class="o">=</span><span class="n">v2</span><span class="o">.</span><span class="mf">0.2</span>
</span></span><span class="line"><span class="cl"><span class="n">OS_ARCH</span><span class="o">=</span><span class="n">darwin</span><span class="o">-</span><span class="n">amd64</span>
</span></span><span class="line"><span class="cl"><span class="c1">#OS_ARCH=linux-amd64</span>
</span></span><span class="line"><span class="cl"><span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">jenkins</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="n">jx</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="s2">&#34;${JX_VERSION}&#34;</span><span class="o">/</span><span class="n">jx</span><span class="o">-</span><span class="s2">&#34;${OS_ARCH}&#34;</span><span class="o">.</span><span class="n">tar</span><span class="o">.</span><span class="n">gz</span> <span class="o">|</span> <span class="n">tar</span> <span class="n">xzv</span>
</span></span><span class="line"><span class="cl"><span class="n">sudo</span> <span class="n">mv</span> <span class="n">jx</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span>
</span></span><span class="line"><span class="cl"><span class="n">jx</span> <span class="n">version</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">NAME</span>               <span class="n">VERSION</span>
</span></span><span class="line"><span class="cl"><span class="n">jx</span>                 <span class="mf">2.0</span><span class="o">.</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="n">Kubernetes</span> <span class="n">cluster</span> <span class="n">v1</span><span class="o">.</span><span class="mf">11.7</span><span class="o">-</span><span class="n">gke</span><span class="o">.</span><span class="mi">12</span>
</span></span><span class="line"><span class="cl"><span class="n">kubectl</span>            <span class="n">v1</span><span class="o">.</span><span class="mf">11.9</span><span class="o">-</span><span class="n">dispatcher</span>
</span></span><span class="line"><span class="cl"><span class="n">helm</span> <span class="n">client</span>        <span class="n">v2</span><span class="o">.</span><span class="mf">11.0</span><span class="o">+</span><span class="n">g2e55dbe</span>
</span></span><span class="line"><span class="cl"><span class="n">helm</span> <span class="n">server</span>        <span class="n">v2</span><span class="o">.</span><span class="mf">11.0</span><span class="o">+</span><span class="n">g2e55dbe</span>
</span></span><span class="line"><span class="cl"><span class="n">git</span>                <span class="n">git</span> <span class="n">version</span> <span class="mf">2.20</span><span class="o">.</span><span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="n">Operating</span> <span class="n">System</span>   <span class="n">Mac</span> <span class="ne">OS</span> <span class="n">X</span> <span class="mf">10.14</span><span class="o">.</span><span class="mi">4</span> <span class="n">build</span> <span class="mf">18E226</span>
</span></span></code></pre></div><h3 id="option-1-install-serverless-jenkins-pipeline">(Option 1) Install Serverless Jenkins Pipeline</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">DEFAULT_PASSWORD=mySecretPassWord123
</span></span><span class="line"><span class="cl">jx install \
</span></span><span class="line"><span class="cl">  --default-admin-password=${DEFAULT_PASSWORD} \
</span></span><span class="line"><span class="cl">  --provider=&#39;gke&#39;
</span></span></code></pre></div><p>Options:</p>
<ul>
<li>Enter Github user name</li>
<li>Enter Github personal api token for CI/CD</li>
<li>Enable Github as Git pipeline server</li>
<li>Select Jenkins installation type:
<ul>
<li><input checked="" disabled="" type="checkbox"> Serverless Jenkins X Pipelines with Tekon</li>
<li><input disabled="" type="checkbox"> Static Master Jenkins</li>
</ul>
</li>
<li>Pick default workload build pack
<ul>
<li><input checked="" disabled="" type="checkbox"> Kubernetes Workloads: Automated CI+CD with GitOps Promotion</li>
<li><input disabled="" type="checkbox"> Library Workloads: CI+Release but no CD</li>
</ul>
</li>
<li>Select the organization where you want to create the environment repository:
<ul>
<li>chechiachang</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Your Kubernetes context is now set to the namespace: jx
</span></span><span class="line"><span class="cl">INFO[0231] To switch back to your original namespace use: jx namespace jx
</span></span><span class="line"><span class="cl">INFO[0231] Or to use this context/namespace in just one terminal use: jx shell
</span></span><span class="line"><span class="cl">INFO[0231] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/
</span></span><span class="line"><span class="cl">INFO[0231] To import existing projects into Jenkins:       jx import
</span></span><span class="line"><span class="cl">INFO[0231] To create a new Spring Boot microservice:       jx create spring -d web -d actuator
</span></span><span class="line"><span class="cl">INFO[0231] To create a new microservice from a quickstart: jx create quickstart
</span></span></code></pre></div><h3 id="option-2-install-static-jenkins-server">(Option 2) Install Static Jenkins Server</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">DEFAULT_PASSWORD=mySecretPassWord123
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jx install \
</span></span><span class="line"><span class="cl">  --default-admin-password=${DEFAULT_PASSWORD} \
</span></span><span class="line"><span class="cl">  --provider=&#39;gke&#39;
</span></span></code></pre></div><p>Options:</p>
<ul>
<li>Enter Github user name</li>
<li>Enter Github personal api token for CI/CD</li>
<li>Enable Github as Git pipeline server</li>
<li>Select Jenkins installation type:
<ul>
<li><input disabled="" type="checkbox"> Serverless Jenkins X Pipelines with Tekon</li>
<li><input checked="" disabled="" type="checkbox"> Static Master Jenkins</li>
</ul>
</li>
<li>Pick default workload build pack
<ul>
<li><input checked="" disabled="" type="checkbox"> Kubernetes Workloads: Automated CI+CD with GitOps Promotion</li>
<li><input disabled="" type="checkbox"> Library Workloads: CI+Release but no CD</li>
</ul>
</li>
<li>Select the organization where you want to create the environment repository:
<ul>
<li>chechiachang</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">INFO[0465]Your Kubernetes context is now set to the namespace: jx
</span></span><span class="line"><span class="cl">INFO[0465] To switch back to your original namespace use: jx namespace default
</span></span><span class="line"><span class="cl">INFO[0465] Or to use this context/namespace in just one terminal use: jx shell
</span></span><span class="line"><span class="cl">INFO[0465] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/
</span></span><span class="line"><span class="cl">INFO[0465] To import existing projects into Jenkins:       jx import
</span></span><span class="line"><span class="cl">INFO[0465] To create a new Spring Boot microservice:       jx create spring -d web -d actuator
</span></span><span class="line"><span class="cl">INFO[0465] To create a new microservice from a quickstart: jx create quickstart
</span></span></code></pre></div><p>Access Static Jenkins Server through Domain with username and password
Domain <a href="http://jenkins.jx.11.22.33.44.nip.io/" target="_blank" rel="noopener">http://jenkins.jx.11.22.33.44.nip.io/</a></p>
<h3 id="uninstall">Uninstall</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx uninstall
</span></span><span class="line"><span class="cl"># rm -rf ~/.jx
</span></span></code></pre></div><hr>
<p><a name="pipeline"></a></p>
<h1 id="setup-cicd-pipeline">Setup CI/CD Pipeline</h1>
<h3 id="create-quickstart-repository">Create Quickstart Repository</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl get pods --namespace jx --watch
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># cd workspace
</span></span><span class="line"><span class="cl">jx create quickstart
</span></span></code></pre></div><p>Options:</p>
<ul>
<li>Which organisation do you want to use? chechiachang</li>
<li>Enter the new repository name:  serverless-jenkins-quickstart</li>
<li>select the quickstart you wish to create  [Use arrows to move, type to filter]
angular-io-quickstart
aspnet-app
dlang-http</li>
</ul>
<blockquote>
<p>golang-http
jenkins-cwp-quickstart
jenkins-quickstart
node-http</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">INFO[0121] Watch pipeline activity via:    jx get activity -f serverless-jenkins-quickstart -w
</span></span><span class="line"><span class="cl">INFO[0121] Browse the pipeline log via:    jx get build logs chechiachang/serverless-jenkins-quickstart/master
</span></span><span class="line"><span class="cl">INFO[0121] Open the Jenkins console via    jx console
</span></span><span class="line"><span class="cl">INFO[0121] You can list the pipelines via: jx get pipelines
</span></span><span class="line"><span class="cl">INFO[0121] Open the Jenkins console via    jx console
</span></span><span class="line"><span class="cl">INFO[0121] You can list the pipelines via: jx get pipelines
</span></span><span class="line"><span class="cl">INFO[0121] When the pipeline is complete:  jx get applications
</span></span></code></pre></div><h3 id="check-log-of-the-first-run">Check log of the first run</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx logs pipeline
</span></span></code></pre></div><h3 id="add-step-to-pipeline">Add Step to Pipeline</h3>
<p>Add a setup step for pullrequest</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">cd serverless-jenkins-quickstart
</span></span><span class="line"><span class="cl">jx create step --pipeline pullrequest \
</span></span><span class="line"><span class="cl">  --lifecycle setup \
</span></span><span class="line"><span class="cl">  --mode replace \
</span></span><span class="line"><span class="cl">  --sh &#34;echo hello world&#34;
</span></span></code></pre></div><p>Validate pipeline step for each modification</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx step validate
</span></span></code></pre></div><p>A build-pack pod started after git push. Watch pod status with kubectl.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kubectl get pods --namespace jx --watch
</span></span></code></pre></div><h3 id="check-build-status-on-prow-serverless">Check Build Status on Prow (Serverless)</h3>
<p><a href="http://deck.jx.130.211.245.13.nip.io/" target="_blank" rel="noopener">http://deck.jx.130.211.245.13.nip.io/</a>
Login with username and password</p>
<h3 id="import-existing-repository">Import Existing Repository</h3>
<p>In source code repository:</p>
<p>Import jx to remote jenkins-server. This will apply a Jenkinsfile to repository by default</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx import --url git@github.com:chechiachang/serverless-jenkins-quickstart.git
</span></span></code></pre></div><p>Update jenkins-x.yml</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx create step
</span></span></code></pre></div><p>git commit &amp; push</p>
<h3 id="trouble-shooting">Trouble Shooting</h3>
<p>Failed to get jx resources</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx get pipelines
</span></span></code></pre></div><p>Make sure your jx (or kubectl) context is with the correct GKE and namespace</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kc config set-context gke_my-project_asia-east1-b_jenkins \
</span></span><span class="line"><span class="cl">  --namespace=jx
</span></span></code></pre></div><h3 id="why-not-use-helm-chart">Why not use helm chart?</h3>
<p>It&rsquo;s readlly depend on what we need in CI/CD automation.</p>
<p><a href="https://github.com/helm/charts/tree/master/stable/jenkins" target="_blank" rel="noopener">Jenkins Helm Chart</a> create Jenkins master and slave cluster on Kubernetes utilizing the Jenkins Kubernetes plugin.
Jenkin Platform with jx is Jenkins Platform native to Kubernetes. It comes with powerful cloud native components like Prow automation, Nexus, Docker Registry, Tekton Pipeline, &hellip;</p>
<h3 id="check-jenkins-x-examples">Check jenkins-x examples</h3>
<p><a href="https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs" target="_blank" rel="noopener">https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs</a></p>
<hr>
<p><a name="client"></a></p>
<h1 id="client">Client</h1>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx get urls
</span></span><span class="line"><span class="cl">Name                      URL
</span></span><span class="line"><span class="cl">jenkins                   http://jenkins.jx.11.22.33.44.nip.io
</span></span><span class="line"><span class="cl">jenkins-x-chartmuseum     http://chartmuseum.jx.11.22.33.44.nip.io
</span></span><span class="line"><span class="cl">jenkins-x-docker-registry http://docker-registry.jx.11.22.33.44.nip.io
</span></span><span class="line"><span class="cl">jenkins-x-monocular-api   http://monocular.jx.11.22.33.44.nip.io
</span></span><span class="line"><span class="cl">jenkins-x-monocular-ui    http://monocular.jx.11.22.33.44.nip.io
</span></span><span class="line"><span class="cl">nexus                     http://nexus.jx.11.22.33.44.nip.io
</span></span></code></pre></div><h3 id="get-cluster-status">Get Cluster Status</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx diagnose
</span></span></code></pre></div><h3 id="get-applications--pipelines">Get Applications &amp; Pipelines</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx get applications
</span></span><span class="line"><span class="cl">jx get pipelines
</span></span></code></pre></div><h3 id="get-ci-activities--build-log">Get CI Activities &amp; build log</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx get activities
</span></span><span class="line"><span class="cl">jx get activities --filter=&#39;jenkins-x-on-kubernetes&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jx get build log
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">INFO[0003] view the log at: http://jenkins.jx.11.22.33.44.nip.io/job/chechiachang/job/jenkins-x-on-kubernetes/job/feature-add-test/3/console
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></div><h3 id="trigger-build--check-activity">Trigger Build &amp; Check Activity</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx start pipeline
</span></span><span class="line"><span class="cl">jx start pipeline --filter=&#39;jenkins-x-on-kubernetes/feature-add-test&#39;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">jx get activities --filter=&#39;jenkins-x-on-kubernetes&#39;
</span></span></code></pre></div><h3 id="create-pull-request">Create Pull Request</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">jx create pullrequest
</span></span></code></pre></div>
    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/zh-hant/tag/jenkins/">jenkins</a>
  
  <a class="badge badge-light" href="/zh-hant/tag/ci/">ci</a>
  
  <a class="badge badge-light" href="/zh-hant/tag/cd/">cd</a>
  
  <a class="badge badge-light" href="/zh-hant/tag/kubernetes/">kubernetes</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F&amp;text=Jenkins&#43;X&#43;on&#43;Kubernetes" target="_blank" rel="noopener" class="share-btn-twitter" aria-label="twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F&amp;t=Jenkins&#43;X&#43;on&#43;Kubernetes" target="_blank" rel="noopener" class="share-btn-facebook" aria-label="facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=Jenkins%20X%20on%20Kubernetes&amp;body=https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F&amp;title=Jenkins&#43;X&#43;on&#43;Kubernetes" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="whatsapp://send?text=Jenkins&#43;X&#43;on&#43;Kubernetes%20https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F" target="_blank" rel="noopener" class="share-btn-whatsapp" aria-label="whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https%3A%2F%2Fchechia.net%2Fzh-hant%2Fpost%2F2019-04-19-jenkins-x-on-kubernetes%2F&amp;title=Jenkins&#43;X&#43;on&#43;Kubernetes" target="_blank" rel="noopener" class="share-btn-weibo" aria-label="weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      <a href="https://chechia.net/"><img class="avatar mr-3 avatar-circle" src="https://s.gravatar.com/avatar/e56eaaf62e2112055827c197b938d620?s=200" alt="張哲嘉"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://chechia.net/">張哲嘉</a></h5>
      <h6 class="card-subtitle">Site Reliability Engineer</h6>
      <p class="card-text">我的研究領域包括網站可靠性工程、DevOps、Container和Kubernetes。</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/zh-hant/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/chechiachang" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/chechiachang" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.facebook.com/engineer.from.scratch" target="_blank" rel="noopener">
        <i class="fab fa-facebook"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/che-chia-chang-92194a4a/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    © 2024 Me. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      由<a href="https://hugoblox.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Hugo Blox Builder</a>支持發布——免費<a href="https://github.com/HugoBlox/hugo-blox-builder" target="_blank" rel="noopener">開源</a>網站，為創作者賦能。
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.938a3a7554cd9f6602290411f64d2617.js"></script>




  

  
  

  













  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  

















<script id="page-data" type="application/json">{"use_headroom":true}</script>


  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/zh-hant/js/wowchemy.min.c1296fcfda1f6e2549c8cd4fe453ac58.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">引用</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> 複製
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> 下載
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.9137013a66774049159934c29c3f0205.js" type="module"></script>


















</body>
</html>
