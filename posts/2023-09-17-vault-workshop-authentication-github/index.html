<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Vault Workshop 06: Github Auth method | Che-Chia Chang</title><meta name=keywords content="vault,iac,workshop,terraform,鐵人賽2023,chatgpt"><meta name=description content="如果你希望追蹤最新的草稿，請見鐵人賽2023
本 workshop 也接受網友的許願清單，如果有興趣的題目可於第一篇底下留言，筆者會盡力實現，但不做任何保證
整篇 Workshop 會使用的範例與原始碼，放在 Github Repository: vault-playground
Day 06：Github auth method
不需要使用 root token 的 auth method: github
Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。
簡單來說，github organization chechia-net，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。
注意
在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 read:org scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 read:org 權限的 personal access token
啟用 github auth method
你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。"><meta name=author content="chechiachang"><link rel=canonical href=https://chechia.net/posts/2023-09-17-vault-workshop-authentication-github/><meta name=google-site-verification content="G-QYR8JCDGM9"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://chechia.net/favicon/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://chechia.net/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://chechia.net/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://chechia.net/favicon/favicon-32x32.png><link rel=mask-icon href=https://chechia.net/favicon/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://chechia.net/posts/2023-09-17-vault-workshop-authentication-github/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYR8JCDGM9"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYR8JCDGM9")}</script><meta property="og:url" content="https://chechia.net/posts/2023-09-17-vault-workshop-authentication-github/"><meta property="og:site_name" content="Che-Chia Chang"><meta property="og:title" content="Vault Workshop 06: Github Auth method"><meta property="og:description" content="如果你希望追蹤最新的草稿，請見鐵人賽2023
本 workshop 也接受網友的許願清單，如果有興趣的題目可於第一篇底下留言，筆者會盡力實現，但不做任何保證
整篇 Workshop 會使用的範例與原始碼，放在 Github Repository: vault-playground
Day 06：Github auth method 不需要使用 root token 的 auth method: github Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。
簡單來說，github organization chechia-net，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。
注意
在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 read:org scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 read:org 權限的 personal access token
啟用 github auth method 你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-09-14T02:42:26+08:00"><meta property="article:modified_time" content="2023-09-14T02:42:26+08:00"><meta property="article:tag" content="Vault"><meta property="article:tag" content="Iac"><meta property="article:tag" content="Workshop"><meta property="article:tag" content="Terraform"><meta property="article:tag" content="鐵人賽2023"><meta property="article:tag" content="Chatgpt"><meta property="og:image" content="https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Vault Workshop 06: Github Auth method"><meta name=twitter:description content="如果你希望追蹤最新的草稿，請見鐵人賽2023
本 workshop 也接受網友的許願清單，如果有興趣的題目可於第一篇底下留言，筆者會盡力實現，但不做任何保證
整篇 Workshop 會使用的範例與原始碼，放在 Github Repository: vault-playground
Day 06：Github auth method
不需要使用 root token 的 auth method: github
Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。
簡單來說，github organization chechia-net，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。
注意
在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 read:org scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 read:org 權限的 personal access token
啟用 github auth method
你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://chechia.net/posts/"},{"@type":"ListItem","position":2,"name":"Vault Workshop 06: Github Auth method","item":"https://chechia.net/posts/2023-09-17-vault-workshop-authentication-github/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Vault Workshop 06: Github Auth method","name":"Vault Workshop 06: Github Auth method","description":"如果你希望追蹤最新的草稿，請見鐵人賽2023\n本 workshop 也接受網友的許願清單，如果有興趣的題目可於第一篇底下留言，筆者會盡力實現，但不做任何保證\n整篇 Workshop 會使用的範例與原始碼，放在 Github Repository: vault-playground\nDay 06：Github auth method 不需要使用 root token 的 auth method: github Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。\n簡單來說，github organization chechia-net，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。\n注意\n在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 read:org scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 read:org 權限的 personal access token\n啟用 github auth method 你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。\n","keywords":["vault","iac","workshop","terraform","鐵人賽2023","chatgpt"],"articleBody":"如果你希望追蹤最新的草稿，請見鐵人賽2023\n本 workshop 也接受網友的許願清單，如果有興趣的題目可於第一篇底下留言，筆者會盡力實現，但不做任何保證\n整篇 Workshop 會使用的範例與原始碼，放在 Github Repository: vault-playground\nDay 06：Github auth method 不需要使用 root token 的 auth method: github Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。\n簡單來說，github organization chechia-net，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。\n注意\n在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 read:org scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 read:org 權限的 personal access token\n啟用 github auth method 你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。\nexport VAULT_TOKEN=hvs.qCqY...9KYv vault auth enable github 這個指令使用 root token 設定 auth method，也是整個 github auth methods 中，唯一需要用到 root token 設定的地方，而且只需要設定一次\noutput\nSuccess! Enabled github auth method at: github/ vault server log 顯示 credential backend 已啟用\n2023-09-16T21:40:10.444+0800 [INFO] core: enabled credential backend: path=github/ type=github version=\"\" 你可以下列指令，列出所有的 auth methods\nvault auth list output\nPath Type Accessor Description Version ---- ---- -------- ----------- ------- github/ github auth_github_9bc96e5f n/a n/a token/ token auth_token_b7984c52 token based credentials n/a github 身份驗證方法已啟用，並位於路徑 auth/github/。\n設定 github auth method 此身份驗證方法需要你在配置中設置 GitHub organization。GitHub organization中，維護了一個允許與 Vault 驗證的使用者列表。\n設置 GitHub 身份驗證的組織。\nvault write auth/github/config organization=chechia-net output\nSuccess! Data written to: auth/github/config 現在，chechia-net GitHub 組織中的所有使用者都可以進行身份驗證。\n設定 github auth method，給不同 team 不同的 policy GitHub 組織可以定義團隊(team)。每個團隊可能可以在組織維護的所有 repository 中執行不同的操作。這些團隊也可能需要訪問 Vault 內的特定密碼。\n配置 GitHub sre 團隊的身份驗證，以獲得 default 和 application 兩個 policy的授權。\nvault write auth/github/map/teams/sre value=default,application output\nSuccess! Data written to: auth/github/map/teams/sre GitHub sre 團隊中 chechia-net 組織的成員，將使用 default 和 application policy 進行身份驗證和授權。\n備註：application policy 尚未在 Vault 中定義。在該策略定義之前，Vault 仍然允許使用者進行身份驗證，但會產生警告。\n你可以使用指令顯示 Vault 啟用的所有身份驗證方法\nvault auth list 回傳顯示兩個 auth methods，github/ 與 token/\nPath Type Accessor Description Version ---- ---- -------- ----------- ------- github/ github auth_github_9bc96e5f n/a n/a token/ token auth_token_b7984c52 token based credentials n/a 使用 github auth method login 使用 help 指令來了解 github auth method 的說明\nvault auth help github output\nUsage: vault login -method=github [CONFIG K=V...] The GitHub auth method allows users to authenticate using a GitHub personal access token. Users can generate a personal access token from the settings page on their GitHub account. # GitHub 身份驗證方法允許使用者使用 GitHub personal access token進行身份驗證。使用者可以從其 GitHub Settings -\u003e Developer Settings -\u003e Personal access tokens (classic) 生成個人訪問令牌。 Authenticate using a GitHub token: $ vault login -method=github token=abcd1234 Configuration: mount= Path where the GitHub credential method is mounted. This is usually provided via the -path flag in the \"vault login\" command, but it can be specified here as well. If specified here, it takes precedence over the value for -path. The default value is \"github\". # GitHub 憑證方法掛載的路徑。通常透過 \"vault login\" 指令的 -path flag 提供，但這裡也可以指定。如果在這裡指定，則優先於 -path 的值。預設的路徑值為 \"github\"。 token= GitHub personal access token to use for authentication. If not provided, Vault will prompt for the value. # 用於身份驗證的 GitHub personal access token。如果未提供，Vault 將提示輸入此值。 輸出顯示了使用 GitHub 方法進行 login 的例子。該方法要求必須定義該方法，並由使用者提供 GitHub personal access token。\n由於你將嘗試使用身份驗證方法進行登錄，請確保在此 shell session 中未設置 VAULT_TOKEN 環境變數，因為其值將優先於你從 Vault 獲取的任何 token。\n取消設定該環境變數。\nunset VAULT_TOKEN 嘗試使用 github auth methods 登入\nvault login -method=github output，使用者使用 github personal access token，取得有效的 vault token\ntoken 格式不同 token 的效期為 768h，短效期 token 的曝險程度較低 這個 token 的 policy 權限只有 default policy metadata 是 github 回傳的，vault 中並沒有建立 username=chechiachang 的資料 org 是 chechia-net username 是 chechiachang GitHub Personal Access Token (will be hidden): Success! You are now authenticated. The token information displayed below is already stored in the token helper. You do NOT need to run \"vault login\" again. Future Vault requests will automatically use this token. Key Value --- ----- token hvs.CAESI...ncU0 token_accessor lKVpMawotXg1fXcgRvpAOAwQ token_duration 768h token_renewable true token_policies [\"default\"] identity_policies [] policies [\"default\"] token_meta_org chechia-net token_meta_username chechiachang 當未提供 GitHub personal access token 給命令時，Vault CLI 會提示使用者輸入。\n如果提供了有效的 GitHub personal access token，則使用者將成功登錄 vault，並且輸出會顯示一個 Vault token。使用者可以使用這個 Vault token，直到該 token 被撤銷或其有效期超過了 token_duration。\n你可以使用 vault token lookup 來檢視當前的 token\nvault token lookup output，顯示使用中的 token，使用的 path 與 methods 是 github/，效期 ttl 在倒數中逐漸減少 767h54m27s\nKey Value --- ----- accessor lKVpMawotXg1fXcgRvpAOAwQ creation_time 1694873434 creation_ttl 768h display_name github-chechiachang entity_id 5d8af1ab-53a2-e1c5-61bf-bb0b6c7d190f expire_time 2023-10-18T22:10:34.812089+08:00 explicit_max_ttl 0s id hvs.CAESI...ncU0 issue_time 2023-09-16T22:10:34.812099+08:00 meta map[org:chechia-net username:chechiachang] num_uses 0 orphan true path auth/github/login policies [default] renewable true ttl 767h54m27s type service 記得我們建立 team 的 policy = default + application 嗎？你可以在 github 上把 user 加入到 team/sre\n例如我們把 chechiachang 加入到 org/chechia-net 的 team/sre\n當前登入 session 權限尚未更新，我們直接重新登入一次\nvault login -method=github output，可以看見登入後的 policy 權限增加成為 default + application\nGitHub Personal Access Token (will be hidden): Success! You are now authenticated. The token information displayed below is already stored in the token helper. You do NOT need to run \"vault login\" again. Future Vault requests will automatically use this token. Key Value --- ----- token hvs.CAES...RcmE token_accessor 6DbsDizOenhCuWMmUWspTZwp token_duration 768h token_renewable true token_policies [\"application\" \"default\"] identity_policies [] policies [\"application\" \"default\"] token_meta_org chechia-net token_meta_username chechiachang 以上是透過 github/ auth methods\n管理者設定 github/ method config 使用者 chechiachang，使用 github/ method login 使用的權限管理是依照 github org / team 來管理，vault 並沒有紀錄 team 與使用者資料 清理：移除 auth methods 使用 root token 再次進行登錄。\nvault login output\nToken (will be hidden): Success! You are now authenticated. The token information displayed below is already stored in the token helper. You do NOT need to run \"vault login\" again. Future Vault requests will automatically use this token. Key Value --- ----- token hvs.J80w...mjoh token_accessor DaI1V1rq9tKZX5EaO4AfMI26 token_duration ∞ token_renewable false token_policies [\"root\"] identity_policies [] policies [\"root\"] 使用以下指令撤銷 github/ auth methods 產生的 token\nvault token revoke -mode path auth/github output\nSuccess! Revoked token (if it existed) vault server log，對於 auth/github 路徑的所有登錄生成的令牌都已被撤銷。\n2023-09-16T22:25:06.793+0800 [INFO] expiration: revoked lease: lease_id=auth/github/login/h71720c9bc6fed61d459da4b172dc518a6d55b1dd33c70103cf0b12eb42d7741a 2023-09-16T22:25:06.793+0800 [INFO] expiration: revoked lease: lease_id=auth/github/login/hd2b110a8eda38814ac0e3ba7ccb926e75205c5065480c9c2675ae5f2860f9f97 所有身份驗證方法，除了 token 身份驗證方法，都可以被停用。\n停用 github 身份驗證方法\nvault auth disable github output\nSuccess! Disabled the auth method (if it existed) at: github/ vault server log\n2023-09-16T22:27:42.040+0800 [INFO] core: disabled credential backend: path=auth/github/ 所有使用此身份驗證方法進行登錄生成的token都已被撤銷。\n清理 github 如果有建立 org / team / github personal access token 的話，記得移除他\nchatGPT 本段部分內容使用 chatGPT-3.5 翻譯 https://developer.hashicorp.com/vault/tutorials/getting-started/getting-started-authentication https://developer.hashicorp.com/vault/docs/auth/github 內容，並由筆者人工校驗\nbase context\n我希望你能充當一名繁體中文翻譯，拼寫修正者和改進者。我將用英文與程式語言與你對話，你將翻譯它，並以已糾正且改進的版本回答，以繁體中文表達。我希望你能用更美麗和優雅、高級的繁體中文詞語和句子替換我簡化的詞語和句子。保持意義不變。我只希望你回答糾正和改進，不要寫解釋。 不要使用敬語，翻譯結果中若出現\"您\"，請用\"你\"取代\"您\"。 result correction\n部分英文內容為專有名詞，產生的繁體中文翻譯結果中，這些名詞維持英文，不需要翻譯成中文：key，value，certificate，token，policy，policy rule，path，path-based，key rolling，audit，audit trail，plain text，key value，Consul，S3 bucket，Leasing，Renewal，binary，prefix，instance，metadata。 修正下列翻譯：將 \"數據\" 改為 \"資料\"，將 \"數據庫\" 改為 \"資料庫\"，將 \"數據\" 改為 \"資料\"，將 \"訪問\" 改為 \"存取\"，將 \"源代碼\" 改為 \"原始碼\"，將 \"信息\" 改為 \"資訊\"，將 \"命令\" 改為 \"指令\"，將 \"禁用\" 改為 \"停用\"，將 \"默認\" 改為 \"預設\"。 ","wordCount":"943","inLanguage":"en","image":"https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2023-09-14T02:42:26+08:00","dateModified":"2023-09-14T02:42:26+08:00","author":{"@type":"Person","name":"chechiachang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://chechia.net/posts/2023-09-17-vault-workshop-authentication-github/"},"publisher":{"@type":"Organization","name":"Che-Chia Chang","logo":{"@type":"ImageObject","url":"https://chechia.net/favicon/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://chechia.net/ accesskey=h title="Home (Alt + H)"><img src=https://chechia.net/favicon/favicon-32x32.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://chechia.net/#posts title=Posts><span>Posts</span></a></li><li><a href=https://mvp.microsoft.com/zh-TW/mvp/profile/e407d0b9-5c01-eb11-a815-000d3a8ccaf5 title=MVP><span>MVP</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://chechia.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://chechia.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://chechia.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://chechia.net/>Home</a>&nbsp;»&nbsp;<a href=https://chechia.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Vault Workshop 06: Github Auth method</h1><div class=post-meta><span title='2023-09-14 02:42:26 +0800 CST'>September 14, 2023</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;943 words&nbsp;·&nbsp;chechiachang&nbsp;|&nbsp;<a href=https://github.com/chechiachang.github.io-src/content/posts/2023-09-17-vault-workshop-authentication-github/index.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#不需要使用-root-token-的-auth-method-github>不需要使用 root token 的 auth method: github</a></li><li><a href=#啟用-github-auth-method>啟用 github auth method</a></li><li><a href=#設定-github-auth-method>設定 github auth method</a></li><li><a href=#設定-github-auth-method給不同-team-不同的-policy>設定 github auth method，給不同 team 不同的 policy</a></li><li><a href=#使用-github-auth-method-login>使用 github auth method login</a></li><li><a href=#清理移除-auth-methods>清理：移除 auth methods</a></li><li><a href=#清理-github>清理 github</a></li><li><a href=#chatgpt>chatGPT</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>如果你希望追蹤最新的草稿，請見<a href=https://chechia.net/zh-hant/tag/%E9%90%B5%E4%BA%BA%E8%B3%BD2023/>鐵人賽2023</a></p><p>本 workshop 也接受網友的許願清單，<a href=https://ithelp.ithome.com.tw/articles/10317378>如果有興趣的題目可於第一篇底下留言</a>，筆者會盡力實現，但不做任何保證</p><p>整篇 Workshop 會使用的範例與原始碼，放在 <a href=http://chechia.net/zh-hant/#projects>Github Repository: vault-playground</a></p><h1 id=day-06github-auth-method>Day 06：Github auth method<a hidden class=anchor aria-hidden=true href=#day-06github-auth-method>#</a></h1><h3 id=不需要使用-root-token-的-auth-method-github>不需要使用 root token 的 auth method: github<a hidden class=anchor aria-hidden=true href=#不需要使用-root-token-的-auth-method-github>#</a></h3><p>Vault 支援用於人員使用者的身份驗證方法。GitHub 身份驗證，使用戶可以通過提供他們的 GitHub 憑證來驗證 Vault，並收到一個 Vault token。</p><p>簡單來說，github organization <a href=https://github.com/chechia-net>chechia-net</a>，可以設定適當的權限給成員 chechiachang，讓 chechiachang 可以透過 github 取得有權限的 token。</p><p>注意</p><p>在練習中所描述的這種身份驗證方法，需要你擁有 GitHub、屬於 GitHub org 中的一個 team ，並生成了具有 <code>read:org</code> scope 的 GitHub personal access token。你可以於 github 創建一個 free plan 的 org，並設定一個 team，然後透過個人 Settings / Developer Settings 來產生一把具有 <code>read:org</code> 權限的 personal access token</p><h3 id=啟用-github-auth-method>啟用 github auth method<a hidden class=anchor aria-hidden=true href=#啟用-github-auth-method>#</a></h3><p>你可以使用下列指令，在 path=github/ 下啟用 GitHub 身份驗證方法。</p><pre><code class=language-bash>export VAULT_TOKEN=hvs.qCqY...9KYv
vault auth enable github
</code></pre><p>這個指令使用 root token 設定 auth method，也是整個 github auth methods 中，唯一需要用到 root token 設定的地方，而且只需要設定一次</p><p>output</p><pre><code class=language-bash>Success! Enabled github auth method at: github/
</code></pre><p>vault server log 顯示 credential backend 已啟用</p><pre><code class=language-bash>2023-09-16T21:40:10.444+0800 [INFO]  core: enabled credential backend: path=github/ type=github version=&quot;&quot;
</code></pre><p>你可以下列指令，列出所有的 auth methods</p><pre><code class=language-bash>vault auth list
</code></pre><p>output</p><pre><code>Path       Type      Accessor                Description                Version
----       ----      --------                -----------                -------
github/    github    auth_github_9bc96e5f    n/a                        n/a
token/     token     auth_token_b7984c52     token based credentials    n/a
</code></pre><p>github 身份驗證方法已啟用，並位於路徑 auth/github/。</p><h3 id=設定-github-auth-method>設定 github auth method<a hidden class=anchor aria-hidden=true href=#設定-github-auth-method>#</a></h3><p>此身份驗證方法需要你在配置中設置 GitHub organization。GitHub organization中，維護了一個允許與 Vault 驗證的使用者列表。</p><p>設置 GitHub 身份驗證的組織。</p><pre><code class=language-bash>vault write auth/github/config organization=chechia-net
</code></pre><p>output</p><pre><code class=language-bash>Success! Data written to: auth/github/config
</code></pre><p>現在，chechia-net GitHub 組織中的所有使用者都可以進行身份驗證。</p><h3 id=設定-github-auth-method給不同-team-不同的-policy>設定 github auth method，給不同 team 不同的 policy<a hidden class=anchor aria-hidden=true href=#設定-github-auth-method給不同-team-不同的-policy>#</a></h3><p>GitHub 組織可以定義團隊(team)。每個團隊可能可以在組織維護的所有 repository 中執行不同的操作。這些團隊也可能需要訪問 Vault 內的特定密碼。</p><p>配置 GitHub sre 團隊的身份驗證，以獲得 default 和 application 兩個 policy的授權。</p><pre><code class=language-bash>vault write auth/github/map/teams/sre value=default,application
</code></pre><p>output</p><pre><code class=language-bash>Success! Data written to: auth/github/map/teams/sre
</code></pre><p>GitHub sre 團隊中 chechia-net 組織的成員，將使用 default 和 application policy 進行身份驗證和授權。</p><p>備註：application policy 尚未在 Vault 中定義。在該策略定義之前，Vault 仍然允許使用者進行身份驗證，但會產生警告。</p><p>你可以使用指令顯示 Vault 啟用的所有身份驗證方法</p><pre><code class=language-bash>vault auth list
</code></pre><p>回傳顯示兩個 auth methods，github/ 與 token/</p><pre><code class=language-bash>Path       Type      Accessor                Description                Version
----       ----      --------                -----------                -------
github/    github    auth_github_9bc96e5f    n/a                        n/a
token/     token     auth_token_b7984c52     token based credentials    n/a
</code></pre><h3 id=使用-github-auth-method-login>使用 github auth method login<a hidden class=anchor aria-hidden=true href=#使用-github-auth-method-login>#</a></h3><p>使用 help 指令來了解 github auth method 的說明</p><pre><code class=language-bash>vault auth help github
</code></pre><p>output</p><pre><code class=language-bash>Usage: vault login -method=github [CONFIG K=V...]

  The GitHub auth method allows users to authenticate using a GitHub
  personal access token. Users can generate a personal access token from the
  settings page on their GitHub account.

# GitHub 身份驗證方法允許使用者使用 GitHub personal access token進行身份驗證。使用者可以從其 GitHub Settings -&gt; Developer Settings -&gt; Personal access tokens (classic) 生成個人訪問令牌。

  Authenticate using a GitHub token:

      $ vault login -method=github token=abcd1234

Configuration:

  mount=&lt;string&gt;
      Path where the GitHub credential method is mounted. This is usually
      provided via the -path flag in the &quot;vault login&quot; command, but it can be
      specified here as well. If specified here, it takes precedence over the
      value for -path. The default value is &quot;github&quot;.

# GitHub 憑證方法掛載的路徑。通常透過 &quot;vault login&quot; 指令的 -path flag 提供，但這裡也可以指定。如果在這裡指定，則優先於 -path 的值。預設的路徑值為 &quot;github&quot;。

  token=&lt;string&gt;
      GitHub personal access token to use for authentication. If not provided,
      Vault will prompt for the value.

# 用於身份驗證的 GitHub personal access token。如果未提供，Vault 將提示輸入此值。
</code></pre><p>輸出顯示了使用 GitHub 方法進行 login 的例子。該方法要求必須定義該方法，並由使用者提供 GitHub personal access token。</p><p>由於你將嘗試使用身份驗證方法進行登錄，請確保在此 shell session 中未設置 VAULT_TOKEN 環境變數，因為其值將優先於你從 Vault 獲取的任何 token。</p><p>取消設定該環境變數。</p><pre><code class=language-bash>unset VAULT_TOKEN
</code></pre><p>嘗試使用 github auth methods 登入</p><pre><code class=language-bash>vault login -method=github
</code></pre><p>output，使用者使用 github personal access token，取得有效的 vault token</p><ul><li>token 格式不同</li><li>token 的效期為 768h，短效期 token 的曝險程度較低</li><li>這個 token 的 policy 權限只有 default policy</li><li>metadata 是 github 回傳的，vault 中並沒有建立 username=chechiachang 的資料<ul><li>org 是 chechia-net</li><li>username 是 chechiachang</li></ul></li></ul><pre><code>GitHub Personal Access Token (will be hidden):

Success! You are now authenticated. The token information displayed below
is already stored in the token helper. You do NOT need to run &quot;vault login&quot;
again. Future Vault requests will automatically use this token.

Key                    Value
---                    -----
token                  hvs.CAESI...ncU0
token_accessor         lKVpMawotXg1fXcgRvpAOAwQ
token_duration         768h
token_renewable        true
token_policies         [&quot;default&quot;]
identity_policies      []
policies               [&quot;default&quot;]
token_meta_org         chechia-net
token_meta_username    chechiachang
</code></pre><p>當未提供 GitHub personal access token 給命令時，Vault CLI 會提示使用者輸入。</p><p>如果提供了有效的 GitHub personal access token，則使用者將成功登錄 vault，並且輸出會顯示一個 Vault token。使用者可以使用這個 Vault token，直到該 token 被撤銷或其有效期超過了 token_duration。</p><p>你可以使用 vault token lookup 來檢視當前的 token</p><pre><code class=language-bash>vault token lookup
</code></pre><p>output，顯示使用中的 token，使用的 path 與 methods 是 github/，效期 ttl 在倒數中逐漸減少 767h54m27s</p><pre><code>Key                 Value
---                 -----
accessor            lKVpMawotXg1fXcgRvpAOAwQ
creation_time       1694873434
creation_ttl        768h
display_name        github-chechiachang
entity_id           5d8af1ab-53a2-e1c5-61bf-bb0b6c7d190f
expire_time         2023-10-18T22:10:34.812089+08:00
explicit_max_ttl    0s
id                  hvs.CAESI...ncU0
issue_time          2023-09-16T22:10:34.812099+08:00
meta                map[org:chechia-net username:chechiachang]
num_uses            0
orphan              true
path                auth/github/login
policies            [default]
renewable           true
ttl                 767h54m27s
type                service
</code></pre><p>記得我們建立 team 的 policy = default + application 嗎？你可以在 github 上把 user 加入到 team/sre</p><p>例如我們把 chechiachang 加入到 org/chechia-net 的 team/sre</p><p>當前登入 session 權限尚未更新，我們直接重新登入一次</p><pre><code class=language-bash>vault login -method=github
</code></pre><p>output，可以看見登入後的 policy 權限增加成為 default + application</p><pre><code>GitHub Personal Access Token (will be hidden):

Success! You are now authenticated. The token information displayed below
is already stored in the token helper. You do NOT need to run &quot;vault login&quot;
again. Future Vault requests will automatically use this token.

Key                    Value
---                    -----
token                  hvs.CAES...RcmE
token_accessor         6DbsDizOenhCuWMmUWspTZwp
token_duration         768h
token_renewable        true
token_policies         [&quot;application&quot; &quot;default&quot;]
identity_policies      []
policies               [&quot;application&quot; &quot;default&quot;]
token_meta_org         chechia-net
token_meta_username    chechiachang
</code></pre><p>以上是透過 github/ auth methods</p><ul><li>管理者設定 github/ method config</li><li>使用者 chechiachang，使用 github/ method login</li><li>使用的權限管理是依照 github org / team 來管理，vault 並沒有紀錄 team 與使用者資料</li></ul><h3 id=清理移除-auth-methods>清理：移除 auth methods<a hidden class=anchor aria-hidden=true href=#清理移除-auth-methods>#</a></h3><p>使用 root token 再次進行登錄。</p><pre><code class=language-bash>vault login
</code></pre><p>output</p><pre><code>Token (will be hidden):

Success! You are now authenticated. The token information displayed below
is already stored in the token helper. You do NOT need to run &quot;vault login&quot;
again. Future Vault requests will automatically use this token.

Key                  Value
---                  -----
token                hvs.J80w...mjoh
token_accessor       DaI1V1rq9tKZX5EaO4AfMI26
token_duration       ∞
token_renewable      false
token_policies       [&quot;root&quot;]
identity_policies    []
policies             [&quot;root&quot;]
</code></pre><p>使用以下指令撤銷 github/ auth methods 產生的 token</p><pre><code class=language-bash>vault token revoke -mode path auth/github
</code></pre><p>output</p><pre><code class=language-bash>Success! Revoked token (if it existed)
</code></pre><p>vault server log，對於 auth/github 路徑的所有登錄生成的令牌都已被撤銷。</p><pre><code>2023-09-16T22:25:06.793+0800 [INFO]  expiration: revoked lease: lease_id=auth/github/login/h71720c9bc6fed61d459da4b172dc518a6d55b1dd33c70103cf0b12eb42d7741a
2023-09-16T22:25:06.793+0800 [INFO]  expiration: revoked lease: lease_id=auth/github/login/hd2b110a8eda38814ac0e3ba7ccb926e75205c5065480c9c2675ae5f2860f9f97
</code></pre><p>所有身份驗證方法，除了 token 身份驗證方法，都可以被停用。</p><p>停用 github 身份驗證方法</p><pre><code class=language-bash>vault auth disable github
</code></pre><p>output</p><pre><code class=language-bash>Success! Disabled the auth method (if it existed) at: github/
</code></pre><p>vault server log</p><pre><code class=language-bash>2023-09-16T22:27:42.040+0800 [INFO]  core: disabled credential backend: path=auth/github/
</code></pre><p>所有使用此身份驗證方法進行登錄生成的token都已被撤銷。</p><h3 id=清理-github>清理 github<a hidden class=anchor aria-hidden=true href=#清理-github>#</a></h3><p>如果有建立 org / team / github personal access token 的話，記得移除他</p><h3 id=chatgpt>chatGPT<a hidden class=anchor aria-hidden=true href=#chatgpt>#</a></h3><p>本段部分內容使用 chatGPT-3.5 翻譯
<a href=https://developer.hashicorp.com/vault/tutorials/getting-started/getting-started-authentication>https://developer.hashicorp.com/vault/tutorials/getting-started/getting-started-authentication</a>
<a href=https://developer.hashicorp.com/vault/docs/auth/github>https://developer.hashicorp.com/vault/docs/auth/github</a>
內容，並由筆者人工校驗</p><p>base context</p><pre><code>我希望你能充當一名繁體中文翻譯，拼寫修正者和改進者。我將用英文與程式語言與你對話，你將翻譯它，並以已糾正且改進的版本回答，以繁體中文表達。我希望你能用更美麗和優雅、高級的繁體中文詞語和句子替換我簡化的詞語和句子。保持意義不變。我只希望你回答糾正和改進，不要寫解釋。

不要使用敬語，翻譯結果中若出現&quot;您&quot;，請用&quot;你&quot;取代&quot;您&quot;。
</code></pre><p>result correction</p><pre><code>部分英文內容為專有名詞，產生的繁體中文翻譯結果中，這些名詞維持英文，不需要翻譯成中文：key，value，certificate，token，policy，policy rule，path，path-based，key rolling，audit，audit trail，plain text，key value，Consul，S3 bucket，Leasing，Renewal，binary，prefix，instance，metadata。

修正下列翻譯：將 &quot;數據&quot; 改為 &quot;資料&quot;，將 &quot;數據庫&quot; 改為 &quot;資料庫&quot;，將 &quot;數據&quot; 改為 &quot;資料&quot;，將 &quot;訪問&quot; 改為 &quot;存取&quot;，將 &quot;源代碼&quot; 改為 &quot;原始碼&quot;，將 &quot;信息&quot; 改為 &quot;資訊&quot;，將 &quot;命令&quot; 改為 &quot;指令&quot;，將 &quot;禁用&quot; 改為 &quot;停用&quot;，將 &quot;默認&quot; 改為 &quot;預設&quot;。
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://chechia.net/tags/vault/>Vault</a></li><li><a href=https://chechia.net/tags/iac/>Iac</a></li><li><a href=https://chechia.net/tags/workshop/>Workshop</a></li><li><a href=https://chechia.net/tags/terraform/>Terraform</a></li><li><a href=https://chechia.net/tags/%E9%90%B5%E4%BA%BA%E8%B3%BD2023/>鐵人賽2023</a></li><li><a href=https://chechia.net/tags/chatgpt/>Chatgpt</a></li></ul><nav class=paginav><a class=prev href=https://chechia.net/posts/2023-09-18-vault-workshop-policy-and-approle/><span class=title>« Prev</span><br><span>Vault Workshop 07: Policy & approle</span>
</a><a class=next href=https://chechia.net/posts/2023-09-16-vault-workshop-authentication/><span class=title>Next »</span><br><span>Vault Workshop 05: Authentication</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on x" href="https://x.com/intent/tweet/?text=Vault%20Workshop%2006%3a%20Github%20Auth%20method&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f&amp;hashtags=vault%2ciac%2cworkshop%2cterraform%2c%e9%90%b5%e4%ba%ba%e8%b3%bd2023%2cchatgpt"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f&amp;title=Vault%20Workshop%2006%3a%20Github%20Auth%20method&amp;summary=Vault%20Workshop%2006%3a%20Github%20Auth%20method&amp;source=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f&title=Vault%20Workshop%2006%3a%20Github%20Auth%20method"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on whatsapp" href="https://api.whatsapp.com/send?text=Vault%20Workshop%2006%3a%20Github%20Auth%20method%20-%20https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on telegram" href="https://telegram.me/share/url?text=Vault%20Workshop%2006%3a%20Github%20Auth%20method&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Vault Workshop 06: Github Auth method on ycombinator" href="https://news.ycombinator.com/submitlink?t=Vault%20Workshop%2006%3a%20Github%20Auth%20method&u=https%3a%2f%2fchechia.net%2fposts%2f2023-09-17-vault-workshop-authentication-github%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://chechia.net/>Che-Chia Chang</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>