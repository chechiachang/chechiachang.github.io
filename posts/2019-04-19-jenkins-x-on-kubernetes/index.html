<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Jenkins X on Kubernetes | Che-Chia Chang</title><meta name=keywords content="jenkins,ci,cd,kubernetes"><meta name=description content="Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.
Jenkins X, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.
Here we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes."><meta name=author content="chechiachang"><link rel=canonical href=https://chechia.net/posts/2019-04-19-jenkins-x-on-kubernetes/><meta name=google-site-verification content="G-QYR8JCDGM9"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://chechia.net/favicon/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://chechia.net/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://chechia.net/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://chechia.net/favicon/favicon-32x32.png><link rel=mask-icon href=https://chechia.net/favicon/favicon-32x32.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://chechia.net/posts/2019-04-19-jenkins-x-on-kubernetes/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYR8JCDGM9"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYR8JCDGM9")}</script><meta property="og:url" content="https://chechia.net/posts/2019-04-19-jenkins-x-on-kubernetes/"><meta property="og:site_name" content="Che-Chia Chang"><meta property="og:title" content="Jenkins X on Kubernetes"><meta property="og:description" content="Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.
Jenkins X, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.
Here we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-04-19T12:15:41+08:00"><meta property="article:modified_time" content="2019-04-19T12:15:41+08:00"><meta property="article:tag" content="Jenkins"><meta property="article:tag" content="Ci"><meta property="article:tag" content="Cd"><meta property="article:tag" content="Kubernetes"><meta property="og:image" content="https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Jenkins X on Kubernetes"><meta name=twitter:description content="Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.
Jenkins X, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.
Here we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://chechia.net/posts/"},{"@type":"ListItem","position":2,"name":"Jenkins X on Kubernetes","item":"https://chechia.net/posts/2019-04-19-jenkins-x-on-kubernetes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Jenkins X on Kubernetes","name":"Jenkins X on Kubernetes","description":"Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.\nJenkins X, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.\nHere we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes.\n","keywords":["jenkins","ci","cd","kubernetes"],"articleBody":"Jenkins is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.\nJenkins X, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.\nHere we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes.\nArchitecture of Jenkins X Install Jenkins with jx Create a Pipeline with jx Develope with jx client For more information about jx itself, check Jenkins-X Github Repo\nArchitecture Check this beautiful diagram.\nhttps://jenkins-x.io/architecture/diagram/ Install Create GKE cluster \u0026 Get Credentials gcloud init gcloud components update CLUSTER_NAME=jenkins-server #CLUSTER_NAME=jenkins-serverless gcloud container clusters create ${CLUSTER_NAME} \\ --num-nodes 1 \\ --machine-type n1-standard-4 \\ --enable-autoscaling \\ --min-nodes 1 \\ --max-nodes 2 \\ --zone asia-east1-b \\ --preemptible # After cluster initialization, get credentials to access cluster with kubectl gcloud container clusters get-credentials ${CLUSTER_NAME} # Check cluster stats. kubectl get nodes Install jx on Local Machine [Jenkins X Release](https://github.com/jenkins-x/jx/releases](https://github.com/jenkins-x/jx/releases)\nJX_VERSION=v2.0.2 OS_ARCH=darwin-amd64 #OS_ARCH=linux-amd64 curl -L https://github.com/jenkins-x/jx/releases/download/\"${JX_VERSION}\"/jx-\"${OS_ARCH}\".tar.gz | tar xzv sudo mv jx /usr/local/bin jx version NAME VERSION jx 2.0.2 Kubernetes cluster v1.11.7-gke.12 kubectl v1.11.9-dispatcher helm client v2.11.0+g2e55dbe helm server v2.11.0+g2e55dbe git git version 2.20.1 Operating System Mac OS X 10.14.4 build 18E226 (Option 1) Install Serverless Jenkins Pipeline DEFAULT_PASSWORD=mySecretPassWord123 jx install \\ --default-admin-password=${DEFAULT_PASSWORD} \\ --provider='gke' Options:\nEnter Github user name Enter Github personal api token for CI/CD Enable Github as Git pipeline server Select Jenkins installation type: Serverless Jenkins X Pipelines with Tekon Static Master Jenkins Pick default workload build pack Kubernetes Workloads: Automated CI+CD with GitOps Promotion Library Workloads: CI+Release but no CD Select the organization where you want to create the environment repository: chechiachang Your Kubernetes context is now set to the namespace: jx INFO[0231] To switch back to your original namespace use: jx namespace jx INFO[0231] Or to use this context/namespace in just one terminal use: jx shell INFO[0231] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/ INFO[0231] To import existing projects into Jenkins: jx import INFO[0231] To create a new Spring Boot microservice: jx create spring -d web -d actuator INFO[0231] To create a new microservice from a quickstart: jx create quickstart (Option 2) Install Static Jenkins Server DEFAULT_PASSWORD=mySecretPassWord123 jx install \\ --default-admin-password=${DEFAULT_PASSWORD} \\ --provider='gke' Options:\nEnter Github user name Enter Github personal api token for CI/CD Enable Github as Git pipeline server Select Jenkins installation type: Serverless Jenkins X Pipelines with Tekon Static Master Jenkins Pick default workload build pack Kubernetes Workloads: Automated CI+CD with GitOps Promotion Library Workloads: CI+Release but no CD Select the organization where you want to create the environment repository: chechiachang INFO[0465]Your Kubernetes context is now set to the namespace: jx INFO[0465] To switch back to your original namespace use: jx namespace default INFO[0465] Or to use this context/namespace in just one terminal use: jx shell INFO[0465] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/ INFO[0465] To import existing projects into Jenkins: jx import INFO[0465] To create a new Spring Boot microservice: jx create spring -d web -d actuator INFO[0465] To create a new microservice from a quickstart: jx create quickstart Access Static Jenkins Server through Domain with username and password Domain http://jenkins.jx.11.22.33.44.nip.io/\nUninstall jx uninstall # rm -rf ~/.jx Setup CI/CD Pipeline Create Quickstart Repository kubectl get pods --namespace jx --watch # cd workspace jx create quickstart Options:\nWhich organisation do you want to use? chechiachang Enter the new repository name: serverless-jenkins-quickstart select the quickstart you wish to create [Use arrows to move, type to filter] angular-io-quickstart aspnet-app dlang-http golang-http jenkins-cwp-quickstart jenkins-quickstart node-http\nINFO[0121] Watch pipeline activity via: jx get activity -f serverless-jenkins-quickstart -w INFO[0121] Browse the pipeline log via: jx get build logs chechiachang/serverless-jenkins-quickstart/master INFO[0121] Open the Jenkins console via jx console INFO[0121] You can list the pipelines via: jx get pipelines INFO[0121] Open the Jenkins console via jx console INFO[0121] You can list the pipelines via: jx get pipelines INFO[0121] When the pipeline is complete: jx get applications Check log of the first run jx logs pipeline Add Step to Pipeline Add a setup step for pullrequest\ncd serverless-jenkins-quickstart jx create step --pipeline pullrequest \\ --lifecycle setup \\ --mode replace \\ --sh \"echo hello world\" Validate pipeline step for each modification\njx step validate A build-pack pod started after git push. Watch pod status with kubectl.\nkubectl get pods --namespace jx --watch Check Build Status on Prow (Serverless) http://deck.jx.130.211.245.13.nip.io/ Login with username and password\nImport Existing Repository In source code repository:\nImport jx to remote jenkins-server. This will apply a Jenkinsfile to repository by default\njx import --url git@github.com:chechiachang/serverless-jenkins-quickstart.git Update jenkins-x.yml\njx create step git commit \u0026 push\nTrouble Shooting Failed to get jx resources\njx get pipelines Make sure your jx (or kubectl) context is with the correct GKE and namespace\nkc config set-context gke_my-project_asia-east1-b_jenkins \\ --namespace=jx Why not use helm chart? It’s readlly depend on what we need in CI/CD automation.\nJenkins Helm Chart create Jenkins master and slave cluster on Kubernetes utilizing the Jenkins Kubernetes plugin. Jenkin Platform with jx is Jenkins Platform native to Kubernetes. It comes with powerful cloud native components like Prow automation, Nexus, Docker Registry, Tekton Pipeline, …\nCheck jenkins-x examples https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs\nClient jx get urls Name URL jenkins http://jenkins.jx.11.22.33.44.nip.io jenkins-x-chartmuseum http://chartmuseum.jx.11.22.33.44.nip.io jenkins-x-docker-registry http://docker-registry.jx.11.22.33.44.nip.io jenkins-x-monocular-api http://monocular.jx.11.22.33.44.nip.io jenkins-x-monocular-ui http://monocular.jx.11.22.33.44.nip.io nexus http://nexus.jx.11.22.33.44.nip.io Get Cluster Status jx diagnose Get Applications \u0026 Pipelines jx get applications jx get pipelines Get CI Activities \u0026 build log jx get activities jx get activities --filter='jenkins-x-on-kubernetes' jx get build log INFO[0003] view the log at: http://jenkins.jx.11.22.33.44.nip.io/job/chechiachang/job/jenkins-x-on-kubernetes/job/feature-add-test/3/console ... Trigger Build \u0026 Check Activity jx start pipeline jx start pipeline --filter='jenkins-x-on-kubernetes/feature-add-test' jx get activities --filter='jenkins-x-on-kubernetes' Create Pull Request jx create pullrequest ","wordCount":"949","inLanguage":"en","image":"https://chechia.net/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2019-04-19T12:15:41+08:00","dateModified":"2019-04-19T12:15:41+08:00","author":{"@type":"Person","name":"chechiachang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://chechia.net/posts/2019-04-19-jenkins-x-on-kubernetes/"},"publisher":{"@type":"Organization","name":"Che-Chia Chang","logo":{"@type":"ImageObject","url":"https://chechia.net/favicon/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://chechia.net/ accesskey=h title="Home (Alt + H)"><img src=https://chechia.net/favicon/favicon-32x32.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://chechia.net/#posts title=Posts><span>Posts</span></a></li><li><a href=https://mvp.microsoft.com/zh-TW/mvp/profile/e407d0b9-5c01-eb11-a815-000d3a8ccaf5 title=MVP><span>MVP</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://chechia.net/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://chechia.net/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://chechia.net/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://chechia.net/>Home</a>&nbsp;»&nbsp;<a href=https://chechia.net/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Jenkins X on Kubernetes</h1><div class=post-meta><span title='2019-04-19 12:15:41 +0800 CST'>April 19, 2019</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;949 words&nbsp;·&nbsp;chechiachang&nbsp;|&nbsp;<a href=https://github.com/chechiachang.github.io-src/content/posts/2019-04-19-jenkins-x-on-kubernetes.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#create-gke-cluster--get-credentials>Create GKE cluster & Get Credentials</a></li><li><a href=#install-jx-on-local-machine>Install jx on Local Machine</a></li><li><a href=#option-1-install-serverless-jenkins-pipeline>(Option 1) Install Serverless Jenkins Pipeline</a></li><li><a href=#option-2-install-static-jenkins-server>(Option 2) Install Static Jenkins Server</a></li><li><a href=#uninstall>Uninstall</a></li></ul></li></ul><ul><li><ul><li><a href=#create-quickstart-repository>Create Quickstart Repository</a></li><li><a href=#check-log-of-the-first-run>Check log of the first run</a></li><li><a href=#add-step-to-pipeline>Add Step to Pipeline</a></li><li><a href=#check-build-status-on-prow-serverless>Check Build Status on Prow (Serverless)</a></li><li><a href=#import-existing-repository>Import Existing Repository</a></li><li><a href=#trouble-shooting>Trouble Shooting</a></li><li><a href=#why-not-use-helm-chart>Why not use helm chart?</a></li><li><a href=#check-jenkins-x-examples>Check jenkins-x examples</a></li></ul></li></ul><ul><li><ul><li><a href=#get-cluster-status>Get Cluster Status</a></li><li><a href=#get-applications--pipelines>Get Applications & Pipelines</a></li><li><a href=#get-ci-activities--build-log>Get CI Activities & build log</a></li><li><a href=#trigger-build--check-activity>Trigger Build & Check Activity</a></li><li><a href=#create-pull-request>Create Pull Request</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p><a href=https://jenkins.io/>Jenkins</a> is one of the earliest open source antomation server and remains the most common option in use today. Over the years, Jenkins has evolved into a powerful and flexible framework with hundreds of plugins to support automation for any project.</p><p><a href=https://jenkins-x.io/>Jenkins X</a>, on the other hand, is a CI/CD platform (Jenkins Platform) for modern cloud applications on Kubernetes.</p><p>Here we talk about some basic concepts about Jenkins X and provide a hand-to-hand guide to deploy jenkins-x on Kubernetes.</p><ul><li><a href=/posts/2019-04-19-jenkins-x-on-kubernetes/#architecture>Architecture of Jenkins X</a></li><li><a href=/posts/2019-04-19-jenkins-x-on-kubernetes/#install>Install Jenkins with jx</a></li><li><a href=/posts/2019-04-19-jenkins-x-on-kubernetes/#pipeline>Create a Pipeline with jx</a></li><li><a href=/posts/2019-04-19-jenkins-x-on-kubernetes/#client>Develope with jx client</a></li></ul><p>For more information about jx itself, check <a href=https://github.com/jenkins-x/jx>Jenkins-X Github Repo</a></p><p><a name=architecture></a></p><h1 id=architecture>Architecture<a hidden class=anchor aria-hidden=true href=#architecture>#</a></h1><p>Check this beautiful diagram.</p><figure><img loading=lazy src=jenkins/architecture-serverless.png><figcaption>https://jenkins-x.io/architecture/diagram/</figcaption></figure><hr><p><a name=install></a></p><h1 id=install>Install<a hidden class=anchor aria-hidden=true href=#install>#</a></h1><h3 id=create-gke-cluster--get-credentials>Create GKE cluster & Get Credentials<a hidden class=anchor aria-hidden=true href=#create-gke-cluster--get-credentials>#</a></h3><pre><code>gcloud init
gcloud components update
</code></pre><pre><code>CLUSTER_NAME=jenkins-server
#CLUSTER_NAME=jenkins-serverless

gcloud container clusters create ${CLUSTER_NAME} \
  --num-nodes 1 \
  --machine-type n1-standard-4 \
  --enable-autoscaling \
  --min-nodes 1 \
  --max-nodes 2 \
  --zone asia-east1-b \
  --preemptible

# After cluster initialization, get credentials to access cluster with kubectl
gcloud container clusters get-credentials ${CLUSTER_NAME}

# Check cluster stats.
kubectl get nodes
</code></pre><h3 id=install-jx-on-local-machine>Install jx on Local Machine<a hidden class=anchor aria-hidden=true href=#install-jx-on-local-machine>#</a></h3><p>[Jenkins X Release](<a href=https://github.com/jenkins-x/jx/releases]%28https://github.com/jenkins-x/jx/releases%29>https://github.com/jenkins-x/jx/releases](https://github.com/jenkins-x/jx/releases)</a></p><pre><code>JX_VERSION=v2.0.2
OS_ARCH=darwin-amd64
#OS_ARCH=linux-amd64
curl -L https://github.com/jenkins-x/jx/releases/download/&quot;${JX_VERSION}&quot;/jx-&quot;${OS_ARCH}&quot;.tar.gz | tar xzv
sudo mv jx /usr/local/bin
jx version

NAME               VERSION
jx                 2.0.2
Kubernetes cluster v1.11.7-gke.12
kubectl            v1.11.9-dispatcher
helm client        v2.11.0+g2e55dbe
helm server        v2.11.0+g2e55dbe
git                git version 2.20.1
Operating System   Mac OS X 10.14.4 build 18E226
</code></pre><h3 id=option-1-install-serverless-jenkins-pipeline>(Option 1) Install Serverless Jenkins Pipeline<a hidden class=anchor aria-hidden=true href=#option-1-install-serverless-jenkins-pipeline>#</a></h3><pre><code>DEFAULT_PASSWORD=mySecretPassWord123
jx install \
  --default-admin-password=${DEFAULT_PASSWORD} \
  --provider='gke'
</code></pre><p>Options:</p><ul><li>Enter Github user name</li><li>Enter Github personal api token for CI/CD</li><li>Enable Github as Git pipeline server</li><li>Select Jenkins installation type:<ul><li><input checked disabled type=checkbox> Serverless Jenkins X Pipelines with Tekon</li><li><input disabled type=checkbox> Static Master Jenkins</li></ul></li><li>Pick default workload build pack<ul><li><input checked disabled type=checkbox> Kubernetes Workloads: Automated CI+CD with GitOps Promotion</li><li><input disabled type=checkbox> Library Workloads: CI+Release but no CD</li></ul></li><li>Select the organization where you want to create the environment repository:<ul><li>chechiachang</li></ul></li></ul><pre><code>Your Kubernetes context is now set to the namespace: jx
INFO[0231] To switch back to your original namespace use: jx namespace jx
INFO[0231] Or to use this context/namespace in just one terminal use: jx shell
INFO[0231] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/
INFO[0231] To import existing projects into Jenkins:       jx import
INFO[0231] To create a new Spring Boot microservice:       jx create spring -d web -d actuator
INFO[0231] To create a new microservice from a quickstart: jx create quickstart
</code></pre><h3 id=option-2-install-static-jenkins-server>(Option 2) Install Static Jenkins Server<a hidden class=anchor aria-hidden=true href=#option-2-install-static-jenkins-server>#</a></h3><pre><code>DEFAULT_PASSWORD=mySecretPassWord123

jx install \
  --default-admin-password=${DEFAULT_PASSWORD} \
  --provider='gke'
</code></pre><p>Options:</p><ul><li>Enter Github user name</li><li>Enter Github personal api token for CI/CD</li><li>Enable Github as Git pipeline server</li><li>Select Jenkins installation type:<ul><li><input disabled type=checkbox> Serverless Jenkins X Pipelines with Tekon</li><li><input checked disabled type=checkbox> Static Master Jenkins</li></ul></li><li>Pick default workload build pack<ul><li><input checked disabled type=checkbox> Kubernetes Workloads: Automated CI+CD with GitOps Promotion</li><li><input disabled type=checkbox> Library Workloads: CI+Release but no CD</li></ul></li><li>Select the organization where you want to create the environment repository:<ul><li>chechiachang</li></ul></li></ul><pre><code>INFO[0465]Your Kubernetes context is now set to the namespace: jx
INFO[0465] To switch back to your original namespace use: jx namespace default
INFO[0465] Or to use this context/namespace in just one terminal use: jx shell
INFO[0465] For help on switching contexts see: https://jenkins-x.io/developing/kube-context/
INFO[0465] To import existing projects into Jenkins:       jx import
INFO[0465] To create a new Spring Boot microservice:       jx create spring -d web -d actuator
INFO[0465] To create a new microservice from a quickstart: jx create quickstart
</code></pre><p>Access Static Jenkins Server through Domain with username and password
Domain <a href=http://jenkins.jx.11.22.33.44.nip.io/>http://jenkins.jx.11.22.33.44.nip.io/</a></p><h3 id=uninstall>Uninstall<a hidden class=anchor aria-hidden=true href=#uninstall>#</a></h3><pre><code>jx uninstall
# rm -rf ~/.jx
</code></pre><hr><p><a name=pipeline></a></p><h1 id=setup-cicd-pipeline>Setup CI/CD Pipeline<a hidden class=anchor aria-hidden=true href=#setup-cicd-pipeline>#</a></h1><h3 id=create-quickstart-repository>Create Quickstart Repository<a hidden class=anchor aria-hidden=true href=#create-quickstart-repository>#</a></h3><pre><code>kubectl get pods --namespace jx --watch
</code></pre><pre><code># cd workspace
jx create quickstart
</code></pre><p>Options:</p><ul><li>Which organisation do you want to use? chechiachang</li><li>Enter the new repository name: serverless-jenkins-quickstart</li><li>select the quickstart you wish to create [Use arrows to move, type to filter]
angular-io-quickstart
aspnet-app
dlang-http</li></ul><blockquote><p>golang-http
jenkins-cwp-quickstart
jenkins-quickstart
node-http</p></blockquote><pre><code>INFO[0121] Watch pipeline activity via:    jx get activity -f serverless-jenkins-quickstart -w
INFO[0121] Browse the pipeline log via:    jx get build logs chechiachang/serverless-jenkins-quickstart/master
INFO[0121] Open the Jenkins console via    jx console
INFO[0121] You can list the pipelines via: jx get pipelines
INFO[0121] Open the Jenkins console via    jx console
INFO[0121] You can list the pipelines via: jx get pipelines
INFO[0121] When the pipeline is complete:  jx get applications
</code></pre><h3 id=check-log-of-the-first-run>Check log of the first run<a hidden class=anchor aria-hidden=true href=#check-log-of-the-first-run>#</a></h3><pre><code>jx logs pipeline
</code></pre><h3 id=add-step-to-pipeline>Add Step to Pipeline<a hidden class=anchor aria-hidden=true href=#add-step-to-pipeline>#</a></h3><p>Add a setup step for pullrequest</p><pre><code>cd serverless-jenkins-quickstart
jx create step --pipeline pullrequest \
  --lifecycle setup \
  --mode replace \
  --sh &quot;echo hello world&quot;
</code></pre><p>Validate pipeline step for each modification</p><pre><code>jx step validate
</code></pre><p>A build-pack pod started after git push. Watch pod status with kubectl.</p><pre><code>kubectl get pods --namespace jx --watch
</code></pre><h3 id=check-build-status-on-prow-serverless>Check Build Status on Prow (Serverless)<a hidden class=anchor aria-hidden=true href=#check-build-status-on-prow-serverless>#</a></h3><p><a href=http://deck.jx.130.211.245.13.nip.io/>http://deck.jx.130.211.245.13.nip.io/</a>
Login with username and password</p><h3 id=import-existing-repository>Import Existing Repository<a hidden class=anchor aria-hidden=true href=#import-existing-repository>#</a></h3><p>In source code repository:</p><p>Import jx to remote jenkins-server. This will apply a Jenkinsfile to repository by default</p><pre><code>jx import --url git@github.com:chechiachang/serverless-jenkins-quickstart.git
</code></pre><p>Update jenkins-x.yml</p><pre><code>jx create step
</code></pre><p>git commit & push</p><h3 id=trouble-shooting>Trouble Shooting<a hidden class=anchor aria-hidden=true href=#trouble-shooting>#</a></h3><p>Failed to get jx resources</p><pre><code>jx get pipelines
</code></pre><p>Make sure your jx (or kubectl) context is with the correct GKE and namespace</p><pre><code>kc config set-context gke_my-project_asia-east1-b_jenkins \
  --namespace=jx
</code></pre><h3 id=why-not-use-helm-chart>Why not use helm chart?<a hidden class=anchor aria-hidden=true href=#why-not-use-helm-chart>#</a></h3><p>It&rsquo;s readlly depend on what we need in CI/CD automation.</p><p><a href=https://github.com/helm/charts/tree/master/stable/jenkins>Jenkins Helm Chart</a> create Jenkins master and slave cluster on Kubernetes utilizing the Jenkins Kubernetes plugin.
Jenkin Platform with jx is Jenkins Platform native to Kubernetes. It comes with powerful cloud native components like Prow automation, Nexus, Docker Registry, Tekton Pipeline, &mldr;</p><h3 id=check-jenkins-x-examples>Check jenkins-x examples<a hidden class=anchor aria-hidden=true href=#check-jenkins-x-examples>#</a></h3><p><a href=https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs>https://github.com/jenkins-x-buildpacks/jenkins-x-kubernetes/tree/master/packs</a></p><hr><p><a name=client></a></p><h1 id=client>Client<a hidden class=anchor aria-hidden=true href=#client>#</a></h1><pre><code>jx get urls
Name                      URL
jenkins                   http://jenkins.jx.11.22.33.44.nip.io
jenkins-x-chartmuseum     http://chartmuseum.jx.11.22.33.44.nip.io
jenkins-x-docker-registry http://docker-registry.jx.11.22.33.44.nip.io
jenkins-x-monocular-api   http://monocular.jx.11.22.33.44.nip.io
jenkins-x-monocular-ui    http://monocular.jx.11.22.33.44.nip.io
nexus                     http://nexus.jx.11.22.33.44.nip.io
</code></pre><h3 id=get-cluster-status>Get Cluster Status<a hidden class=anchor aria-hidden=true href=#get-cluster-status>#</a></h3><pre><code>jx diagnose
</code></pre><h3 id=get-applications--pipelines>Get Applications & Pipelines<a hidden class=anchor aria-hidden=true href=#get-applications--pipelines>#</a></h3><pre><code>jx get applications
jx get pipelines
</code></pre><h3 id=get-ci-activities--build-log>Get CI Activities & build log<a hidden class=anchor aria-hidden=true href=#get-ci-activities--build-log>#</a></h3><pre><code>jx get activities
jx get activities --filter='jenkins-x-on-kubernetes'

jx get build log

INFO[0003] view the log at: http://jenkins.jx.11.22.33.44.nip.io/job/chechiachang/job/jenkins-x-on-kubernetes/job/feature-add-test/3/console
...
</code></pre><h3 id=trigger-build--check-activity>Trigger Build & Check Activity<a hidden class=anchor aria-hidden=true href=#trigger-build--check-activity>#</a></h3><pre><code>jx start pipeline
jx start pipeline --filter='jenkins-x-on-kubernetes/feature-add-test'

jx get activities --filter='jenkins-x-on-kubernetes'
</code></pre><h3 id=create-pull-request>Create Pull Request<a hidden class=anchor aria-hidden=true href=#create-pull-request>#</a></h3><pre><code>jx create pullrequest
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://chechia.net/tags/jenkins/>Jenkins</a></li><li><a href=https://chechia.net/tags/ci/>Ci</a></li><li><a href=https://chechia.net/tags/cd/>Cd</a></li><li><a href=https://chechia.net/tags/kubernetes/>Kubernetes</a></li></ul><nav class=paginav><a class=prev href=https://chechia.net/posts/2019-05-06-service-mesh-for-microservice-on-kubernetes/><span class=title>« Prev</span><br><span>Istio 三分鐘就入坑 佈署篇</span>
</a><a class=next href=https://chechia.net/posts/2018-10-06-kubernetes-container-runtime-interface/><span class=title>Next »</span><br><span>Kubernetes Container Runtime Interface</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on x" href="https://x.com/intent/tweet/?text=Jenkins%20X%20on%20Kubernetes&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f&amp;hashtags=jenkins%2cci%2ccd%2ckubernetes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f&amp;title=Jenkins%20X%20on%20Kubernetes&amp;summary=Jenkins%20X%20on%20Kubernetes&amp;source=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f&title=Jenkins%20X%20on%20Kubernetes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on whatsapp" href="https://api.whatsapp.com/send?text=Jenkins%20X%20on%20Kubernetes%20-%20https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on telegram" href="https://telegram.me/share/url?text=Jenkins%20X%20on%20Kubernetes&amp;url=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Jenkins X on Kubernetes on ycombinator" href="https://news.ycombinator.com/submitlink?t=Jenkins%20X%20on%20Kubernetes&u=https%3a%2f%2fchechia.net%2fposts%2f2019-04-19-jenkins-x-on-kubernetes%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://chechia.net/>Che-Chia Chang</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>